
:root {
  --nx-green: #00c853;
  --nx-green-2: #00e676;
  --bg: #0b0d0f;
  --card: #121418;
  --muted: #9aa4ad;
  --text: #e7edf2;
  --bar-bg: #1a1f24;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
}

.topbar {
  display: grid;
  grid-template-columns: auto 1fr auto auto;
  gap: 12px;
  align-items: center;
  background: #1e2329;
  color: var(--text);
  padding: 10px 14px;
  position: sticky;
  top: 0; z-index: 10;
  border-bottom: 1px solid #222a31;
}
.topbar h1 { margin: 0; font-size: 16px; letter-spacing: 0.5px; }
.tabs { display: flex; gap: 6px; }
.tabs .tab {
  background: transparent;
  border: 1px solid #2a323b;
  color: var(--text);
  padding: 6px 10px; border-radius: 8px; cursor: pointer;
}
.tabs .tab.active { border-color: var(--nx-green); }

.status-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--muted); }
.status-dot.live { background: var(--nx-green); box-shadow: 0 0 10px var(--nx-green-2); }

.content { padding: 16px; display: grid; grid-template-columns: 1fr; gap: 16px; max-width: 1200px; margin: 0 auto; }

.card {
  background: var(--card);
  border: 1px solid #20262d;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 2px 20px rgba(0,0,0,0.25);
}
.card-header { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; color: var(--muted); }
.card-header .legend-color { width: 12px; height: 12px; background: var(--nx-green); border-radius: 2px; }

.energy-monitor { }
.ring-wrap { display: grid; place-items: center; padding: 8px 0 4px; }
.ring { width: 240px; height: 240px; transform: rotate(-90deg); }
.ring .bg { fill: none; stroke: #1b2127; stroke-width: 12; }
.ring .seg { fill: none; stroke-width: 12; stroke-linecap: round; }
.ring .seg.pv { stroke: var(--nx-green); }
.ring .seg.grid { stroke: #f9a825; }
.ring .seg.load { stroke: #42a5f5; }
.ring .seg.bat { stroke: #ab47bc; }

.ring-center { position: relative; margin-top: -180px; text-align: center; }
.ring-center .big { font-size: 24px; font-weight: 700; }
.ring-center .sub { font-size: 12px; color: var(--muted); margin-top: 2px; }

.flows { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 8px; }
.flow { background: #0f1317; border: 1px solid #1e252c; padding: 8px 10px; border-radius: 10px; display: flex; justify-content: space-between; color: var(--muted); }
.flow b, .row b { color: var(--text); }

.grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; align-items: center; }
.row.two { grid-template-columns: 1fr 1fr; }
.row .mini { display: grid; gap: 6px; }
.kpi .bar { height: 12px; background: var(--bar-bg); border-radius: 999px; overflow: hidden; border: 1px solid #1f252b; }
.kpi .bar.small { height: 8px; }
.kpi .bar > div { height: 100%; width: 0%; background: var(--nx-green); transition: width .6s ease; }
.kpi .bar-label { margin-top: 6px; text-align: right; color: var(--muted); }

@media (max-width: 1000px) {
  .grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 680px) {
  .ring { width: 200px; height: 200px; }
  .grid { grid-template-columns: 1fr; }
  .flows { grid-template-columns: repeat(2, 1fr); }
}

.hidden{display:none}
.btn{display:inline-block;padding:8px 12px;border:1px solid #2a323b;border-radius:10px;text-decoration:none;color:var(--text)}
.btn:hover{border-color:var(--nx-green)}


.brand{display:flex;align-items:center;gap:8px}
.brand img{height:24px;width:auto;object-fit:contain}

.energy-flow{width:100%;overflow:hidden;margin-bottom:8px}
.flow-svg{width:100%;height:auto}
.node-rect{fill:#0f1317;stroke:#1e252c;stroke-width:1}
.node-label{fill:var(--text);font-size:14px;text-anchor:middle;dominant-baseline:middle}
.flow{fill:none;stroke-width:6;stroke-linecap:round;stroke:var(--nx-green);marker-end:url(#arrow);stroke-dasharray:8 10;animation: dash 1.2s linear infinite}
.flow.grid{stroke:#f9a825}
.flow.bat{stroke:#ab47bc}
@keyframes dash{to{stroke-dashoffset:-18}}
#arrow path{fill:var(--nx-green)}

.input{width:100%;background:#0f1317;border:1px solid #1e252c;border-radius:8px;padding:6px 8px;color:var(--text)}
