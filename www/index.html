<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NexoWatt EMS</title>
<link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<header class="topbar">
  <button id="menuBtn" aria-label="menu">☰</button>
  <div class="brand"><img src="/static/icon.png" alt="NexoWatt"><span>NexoWatt EMS</span></div>
  <div class="status"><span id="liveDot" class="status-dot"></span><button class="tab active" data-tab="live">LIVE</button><button class="tab" data-tab="history">HISTORY</button></div>
</header>

<nav id="menuDropdown" class="menu hidden">
  <button class="menu-item" id="menuOpenSettings">Einstellungen</button>
  <button class="menu-item" id="menuOpenInstaller">Installateur</button>
</nav>

<main>
  <section class="content" data-tab-content="live">
    <section class="card energy-web">
      <div class="card-title"><span class="dot dot-ok"></span>Energiefluss</div>
      <div class="web-wrap">
        <svg class="web" viewBox="-200 -200 400 400">
          <!-- equal ring size nodes with labels inside -->
          <g transform="translate(0,-90)" class="node pv">
            <circle class="ring ring-pv" r="44"></circle>
            <text class="lbl" y="6">PV</text>
          </g>
          <g transform="translate(-90,0)" class="node grid">
            <circle class="ring ring-grid" r="44"></circle>
            <text class="lbl" y="6">Netz</text>
          </g>
          <g transform="translate(90,0)" class="node wb">
            <circle class="ring ring-wb" r="44"></circle>
            <text class="lbl" y="6">Wallbox</text>
          </g>
          <g transform="translate(0,90)" class="node bat">
            <circle class="ring ring-bat" r="44"></circle>
            <text class="lbl" y="6">Batterie</text>
          </g>
          <g transform="translate(0,0)" class="node center">
            <circle class="ring ring-center" r="32"></circle>
            <text class="big" y="-2" id="centerPower">0 W</text>
            <text class="minor" y="14" id="centerLabel">Gebäude</text>
          </g>
          <!-- Battery SoC value -->
          <text class="minor" id="batterySocIn" x="0" y="120" text-anchor="middle">-- %</text>
        </svg>
      </div>
    </section>
  </section>

  <section class="card settings hidden" data-tab-content="settings">
    <h3>Allgemeine Einstellungen</h3>
    <div class="form grid-2">
      <label><span>Benachrichtigungen</span><input type="checkbox" id="s_notify"></label>
      <label><span>E-Mail</span><input type="email" id="s_email"></label>
      <label><span>Dynamischer Zeittarif</span><input type="checkbox" id="s_dynamicTariff"></label>
      <label><span>Speicher Leistung (W)</span><input type="number" id="s_storagePower"></label>
      <label><span>Strompreis (€)</span><input type="number" step="0.01" id="s_price"></label>
      <label><span>Priorität</span><input type="range" min="0" max="100" id="s_priority"></label>
      <label><span>Modus Tarif</span><input type="range" min="0" max="1" id="s_tariffMode"></label>
    </div>
  </section>

  <section class="card installer hidden" data-tab-content="installer">
    <h3>Installateur</h3>
    <div class="form grid-2">
      <label><span>Leistung Netzanschluss (W)</span><input type="number" id="i_gridConnectionPower"></label>
      <label><span>§14a</span><input type="checkbox" id="i_para14a"></label>
      <label><span>Anzahl Ladepunkte</span><input type="number" id="i_chargepoints"></label>
      <label><span>Anzahl Speicher (Modus)</span><input type="number" id="i_storageCountMode"></label>
      <label><span>Leistung Speicher (W)</span><input type="number" id="i_storagePower"></label>
      <label><span>Betriebsmodus EMS</span><input type="number" id="i_emsMode"></label>
      <label><span>SOC Min (%)</span><input type="number" id="i_socMin"></label>
      <label><span>SOC Bereich Lastspitze (%)</span><input type="number" id="i_socPeakRange"></label>
      <label><span>Beladeleistung max (W)</span><input type="number" id="i_chargePowerMax"></label>
      <label><span>Entladeleistung max (W)</span><input type="number" id="i_dischargePowerMax"></label>
      <label><span>NexoWatt Admin URL</span><input type="text" id="i_adminUrl" placeholder="http://host:8081"></label>
    </div>
    <div class="mt">
      <a class="btn" id="openAdmin" target="_blank" rel="noopener">NexoWatt Admin öffnen</a>
    </div>
  </section>
</main>

<script src="/static/app.js"></script>
</body>
</html>
